# 認証手順

PowStampを用いたサーバークライアント間の認証手順について説明します。

## 情報の収集
PowStampはサーバーとクライアント

## PowStampの構成


## 送信と再送信

## 現在の状態を記録

PowStampを用いたサーバとクライアントの認証手順について説明します。


1. サーバーパラメータの取得  
   サーバからServerDomainHashを構成するパラメータとクライアント毎に定められたNonce、現在の目標値に合わせた難易度、まは閾値を取得します。取得できない場合は適当な目標値を定めます。
2. PowStampMessageの構成  
   サーバから得られたNonce以上の値を設定し、PowStampMessageを構成します。
3. PowStampSignatureの構成
   PowStampMessageからPowStampSignatureを構成します。
4. PowStampの構成
   PowNonceの値を変更しながらハッシングを行い、閾値を下回るスコアを目指します。

作成したPowStampと、必要ならペイロードをサーバーに送ります。
サーバがメッセージの受け入れが成功すると、サーバ側は新しいNonceを計算してクライアントに通知します。失敗した場合は1から手順をやり直します。


## アカウントの寿命


サーバはリクエストを受理するごとにNonce値を加算します。Nonceが最大値（UINT32の場合は0xffffffff）に到達すると、そのアカウントは使用不能になります。


## 難易度

難易度は、サーバーの利用が適正であるほど0に近づかなければなりません。特にクライアントとサーバが双方向通信出ない場合は、適正な利用である限り、サーバは常に一定の難易度でクライアントの要求を受理するべきです。
