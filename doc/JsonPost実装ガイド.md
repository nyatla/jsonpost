# 機能

サーバサイドの実装方針について記述します。

## 初期化

初期化コマンドは、主チェーンをGenesisHashを起点に生成し、各種パラメータをデータベースに書き込み、以降の
全てのコマンドに備えてシステムを初期化する。

入力パラメータ

- GenesisHash
- Powアルゴリズム
- 入力フィルタ(JCSフラグ、Jsonスキーマ)
- 許可フラグ(welcome)


主チェーンのGenesisHashはサーバ識別子としても機能するため、一意であることが望ましい。


このPowStampはNonce=0でなければならず、Powは要求するべきではない。


PowStampの署名は成立しなければならない。
PowStampの構成に必要なchain_hashは、入力パラメータから得る。





初期化が成功したサーバは、主チェーンのchainHasがGenesisHashと等しく、Nonceが0のシステムでなければならない。






# 状態の提示

状態提示コマンドは、クライアントがサーバにアクセスするための情報を提示する。

クライアントが既知か未知かで異なる。
既知と未知を判定は、クライアントから送信されてきたPowNonceを検査する。

このPowNonceのNonce=0、Hash=0*32でなければならず、Powは要求するべきではない。


未知アカウント

未知アカウントの場合、アクセスできるのは主チェーンのみである。
主チェーンのnonceは0に固定されているため、主チェーンのハッシュだけ提示できれば良い。


既知アカウント

既知アカウントの場合、アクセスできるのはそのアカウントの枝チェーンのみである。
枝チェーンのnonceとハッシュを提示しなければならない。

また、アカウントの付帯情報を提示することもできる。



