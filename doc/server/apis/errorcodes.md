# APIエラーコード一覧

このドキュメントでは、APIが生成するアプリケーションエラーコードの一覧を示します。
エラーコードは詳細な理由を提供し、HTTPステータスコードと組み合わせることで適切な対応を判断できます。

## HTTPステータスコードの分類

- **20x (成功)**: リクエストは正常に処理されました（エラーコードなし）。
- **40x (クライアントエラー)**: クライアント側の問題です（対処可能）。
- **50x (サーバーエラー)**: サーバー側の問題です（解決を待つ必要があります）。

## アプリケーションエラーコード一覧

### 未分類エラー
- **000**: 未分類のエラーです。

### リクエストエラー
- **101**: 許可されていないリクエストです (HTTP405)。
- **102**: URLパラメータの構成が誤っています。
- **103**: URLパラメータの値が誤っています。

### 認証エラー
- **201**: このリクエストにはPowStampが必要です。
- **202**: PowStampのフォーマットが不正です。
- **203**: ECDSA署名が誤っています。
- **204**: Nonceが不正です（hintあり）。
- **205**: PoW計算値が規定値未満です（hintあり）。

※ hintはエラー解決の参考情報です。リトライ時に活用してください。

### 入力データエラー
- **301**: リクエストBodyの形式が不正です（読めない、または存在しない）。
- **302**: リクエストBodyの値が不足しています（内容が不十分）。
- **303**: リクエストBodyの値が誤っています。
- **304**: リクエストBodyが大きすぎます (HTTP411)。

### レコードエラー
- **401**: 対象となる情報が見つかりませんでした。

### システムエラー
- **501**: システムは初期化済みです (heavensdoor)。

## エラーレスポンスのフォーマット

エラーが発生した場合、APIは以下の形式のJSONレスポンスを返します。

```json
{
    "success": false,
    "error": {
        "code": 205,
        "message": "Pow score is high. Received:1000804431",
        "hint": null
    }
}
```

### 各項目の説明
- **`success`**: 常に `false` です。
- **`error.code`**: アプリケーションエラーコードを示します。
- **`error.message`**: 人が読める形式のエラーメッセージです（エラー判定には使用しないでください）。
- **`error.hint`**: エラー解決に役立つ数値情報です（一部のエラーコードでのみ有効）。

## hintの詳細

### 204: Nonceエラー

- hintには、受け入れ可能な最小 `nonce` 値が示されます。
- この値 **以上** に設定し、リクエストを再送してください。

```json
{
    "success": false,
    "error": {
        "code": 204,
        "message": "Nonce must be greater than or equal to the current value.",
        "hint": {
            "current": 794070001
        }
    }
}
```

### 205: PoWスコアエラー

- hintには、必要な最小 `PoWスコア` が示されます。
- このスコア **以下** になるように再ハッシングしてください。

```json
{
    "success": false,
    "error": {
        "code": 205,
        "message": "Pow score is high. Received:1000804431",
        "hint": {
            "required_score": 127567873
        }
    }
}
```




